---
title: "بنية الويب متعددة اللغات"
excerpt: "معظم المواقع 'ثنائية اللغة' هي مواقع إنجليزية مع نصوص عربية. الدعم الحقيقي متعدد اللغات يعني إعادة التفكير في البنية من الأساس."
date: "2024-08-15"
author: "فريق ألفا"
tags: ["i18n", "localization", "rtl", "architecture", "performance"]
featured: true
coverImage: "/images/articles/multilingual-architecture.jpg"
readTime: "20 دقيقة قراءة"
---

معظم المواقع التي تدعي "الدعم متعدد اللغات" لديها بنية إنجليزية مع نصوص مترجمة. يقومون بقلب التخطيط للغات RTL ويعتبرون المهمة منتهية.

هذا ليس بنية متعددة اللغات. إنه مسرح ترجمة.

الدعم الحقيقي متعدد اللغات يعني إعادة النظر في كل شيء—من مخطط قاعدة البيانات إلى تصميم المكونات إلى أنماط التنقل.

## مشكلة اتجاه النص

اللغات من اليمين إلى اليسار (RTL) مثل العربية والعبرية لا تُقرأ بالعكس فقط. إنها تفكر بشكل مختلف.

بنية التنقل، التسلسل البصري، حتى استخدام المساحات الفارغة يختلف بين سياقات LTR و RTL.

<Callout type="warning">
معظم المواقع تطبق `dir="rtl"` وتعكس كل شيء باستخدام CSS. هذا يكسر الأيقونات، التخطيطات، والتفاعلات.
</Callout>

### الحل

يجب أن يكون الاتجاه مواطناً من الدرجة الأولى في نظام المكونات الخاص بك.

```typescript
const Button = ({ children, icon }) => {
  const { direction } = useLocale()
  const Icon = direction === 'rtl' ? FlippedIcon : icon
  return <button>{children} <Icon /></button>
}
```

كل مكون يأخذ الاتجاه بعين الاعتبار. ليس كفكرة لاحقة—بل كمعامل أساسي.

## مشكلة طول المحتوى

النص العربي عادة أطول بنسبة 20-30% من الإنجليزي المكافئ. الألمانية يمكن أن تكون أطول بنسبة 40%.

التخطيطات المصممة للإنجليزية تنكسر عندما يتوسع المحتوى.

### الأخطاء الشائعة

- عناصر التنقل ذات العرض الثابت التي تفيض
- الأزرار التي تلتف إلى أسطر متعددة
- العناوين المقتطعة التي تفقد معناها
- التخطيطات التي تتحرك بناءً على طول المحتوى

### الحل

صمم للطول الأقصى المتوقع، وليس الطول المتوسط.

استخدم تخطيطات مرنة. تجنب العروض الثابتة. اختبر باللغة الأطول أولاً.

## مشكلة بنية الروابط

كيف تبني روابط URL لعدة لغات؟

### الخيار 1: نطاق فرعي

`ar.example.com` مقابل `example.com`

**المميزات:** فصل واضح، تكوين CDN أسهل  
**العيوب:** تعقيد SEO، تحديات المصادقة المشتركة

### الخيار 2: قائم على المسار

`example.com/ar/about` مقابل `example.com/about`

**المميزات:** نطاق واحد، مصادقة أسهل  
**العيوب:** توجيه أكثر تعقيداً

### الخيار 3: معامل استعلام

`example.com/about?lang=ar`

**المميزات:** تنفيذ بسيط  
**العيوب:** SEO ضعيف، غير قابل للمشاركة، معادٍ للمستخدم

### اختيارنا

قائم على المسار. إنه النهج الأكثر ملاءمة للمستخدم ومحركات البحث.

## مشكلة قاعدة البيانات

كيف تخزن محتوى متعدد اللغات؟

### النهج 1: جداول منفصلة

```sql
CREATE TABLE products_en (id, name, description)
CREATE TABLE products_ar (id, name, description)
```

**المميزات:** استعلامات بسيطة  
**العيوب:** تكرار البيانات، كابوس صيانة المخطط

### النهج 2: أعمدة JSON

```sql
CREATE TABLE products (
  id INT,
  name JSONB, -- { "en": "Product", "ar": "منتج" }
  description JSONB
)
```

**المميزات:** مصدر واحد للحقيقة  
**العيوب:** استعلامات معقدة، مشاكل أمان الأنواع

### النهج 3: جداول الترجمة

```sql
CREATE TABLE products (id, sku)
CREATE TABLE product_translations (
  product_id,
  locale,
  name,
  description
)
```

**المميزات:** مرن، قابل للصيانة، آمن من حيث الأنواع  
**العيوب:** استعلامات أكثر تعقيداً

<Quote author="فريق ألفا" role="مهندسو قواعد بيانات">
جداول الترجمة تتوسع بشكل أفضل وتحافظ على التكامل المرجعي. هذا هو اختيارنا.
</Quote>

## مشكلة المكونات

يجب أن تتعامل المكونات مع:

- تخطيطات واعية بالاتجاه
- اختلافات طول النص
- تنسيق خاص باللغة (التواريخ، الأرقام، العملة)
- تكيفات ثقافية (الألوان، الصور)

### مثال: منتقي التاريخ

بالإنجليزية: MM/DD/YYYY  
بالعربية: DD/MM/YYYY  
بالسويدية: YYYY-MM-DD

يجب أن يتكيف منتقي التاريخ مع التنسيق، أول يوم في الأسبوع، وأسماء الأشهر.

```typescript
import { format } from 'date-fns'
import { ar, enUS } from 'date-fns/locale'

const formatDate = (date, locale) => {
  const localeMap = { ar, en: enUS }
  return format(date, 'P', { locale: localeMap[locale] })
}
```

## مشكلة الاختبار

المواقع متعددة اللغات تتطلب اختباراً متعدد اللغات:

- اختبار الانحدار البصري في كلا الاتجاهين
- اختبار طول المحتوى في الحدود القصوى
- دقة الترجمة (وليس الوجود فقط)
- الملاءمة الثقافية

## مشكلة الأداء

تقديم عدة لغات يمكن أن يضعف الأداء إذا لم يتم التعامل معه بشكل صحيح.

### حجم الحزمة

تحميل جميع الترجمات مقدماً = حزمة ضخمة.

**الحل:** قسم الكود حسب اللغة. حمّل اللغة النشطة فقط.

```typescript
import(`@/locales/${locale}.json`).then(setTranslations)
```

### تحميل الخطوط

الطباعة العربية تتطلب خطوطاً مختلفة عن اللاتينية. تحميل كليهما = نطاق ترددي مهدر.

**الحل:** حمّل الخطوط بشكل مشروط بناءً على اللغة النشطة.

```css
@font-face {
  font-family: 'Primary';
  src: url('/fonts/latin.woff2');
  unicode-range: U+0000-00FF;
}

@font-face {
  font-family: 'Primary';
  src: url('/fonts/arabic.woff2');
  unicode-range: U+0600-06FF;
}
```

## الواقع

الدعم الحقيقي متعدد اللغات يتطلب:

- إعادة هيكلة قاعدة البيانات
- إعادة تصميم المكونات
- تكييف التخطيط
- تحسين الأداء
- استشارة ثقافية

<Callout type="danger">
إنه ليس ميزة. إنه قرار معماري. معظم الفرق تقلل من تقدير العمل بمقدار 3-5 أضعاف.
</Callout>

إذا كنت تضيف دعماً متعدد اللغات لقاعدة كود موجودة، توقع أن تلمس كل مكون، وكل تخطيط، وكل نموذج بيانات.

إذا كنت تبدأ من الصفر، اجعلها اهتماماً من الدرجة الأولى من اليوم الأول. ابنِ البنية التحتية قبل أن تحتاجها.

لأن إضافة الدعم متعدد اللغات لاحقاً مؤلم. تصميمه من البداية هو فقط... تصميم.